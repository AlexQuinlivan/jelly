#!/usr/bin/python3

import parser, sys

char_table = ''.join(sorted(set(''.join(map(chr,range(0, 128))) + parser.str_arities + parser.str_litlist + parser.str_nonlits)))

assert(len(char_table) <= 256)

with open(sys.argv[2], 'rb') as file:
	code = file.read()

if 'u' in sys.argv[1]:
	code = code.decode()
else:
	code = ''.join([char_table[i] for i in code])

parser.jelly.link_stack = parser.parse_code(code)

args = tuple(map(parser.jelly.ast.literal_eval, sys.argv[3:]))

print(parser.jelly.variadic_chain(parser.jelly.link_stack[-1], args), end = '')